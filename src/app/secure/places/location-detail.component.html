<div *ngIf="location">
    <form (ngSubmit)="onSubmit()" #locationForm="ngForm">

        <div class="form-group row">
            <div class="col-md-3">
                <img src="{{location.imageUrl}}" *ngIf="location.imageUrl" width="300"/>
            </div>
            <div class="col-md-9">
                <h3>
                    <img src="assets/flags/blank.gif" class="flag flag-{{location.country}}" alt="location country"/>
                    {{location.name}}
                    <span class="badge badge-pill badge-warning" *ngIf="location.isNew()" >NEW</span>
                </h3>
                <i>{{location.summary}}</i>
                <!--https://github.com/kekeh/mydatepicker -->
                <br />
                <!--
                <my-date-picker name="mydate" [options]="myDatePickerOptions"
                                [(ngModel)]="location.beenThere" required></my-date-picker>
                                --> 
                <bar-rating [(rate)]="location.rating" [max]="10" [theme]="'fontawesome'" [showText]="false"
                            [titles]="['Find out', 'Lousy','Potential','Nice', 'Yo','Hossa','OK','Good','Great','Awesome']"></bar-rating>
                <a href="{{location.primaryUrl}}" target="_location" *ngIf="location.primaryUrl"> → Open Location </a>
            </div>
        </div>
        <!-- naem(s) and origin -->
        <div class="form-group row">
            <div class="col-md-4">
                <div class="controls">
                    <input name="name" [(ngModel)]="location.name" type="text" placeholder="Name of location (required)"
                           class="form-control input-lg" style="font-weight: bold"/>
                </div>
            </div>

            <div class="col-md-2">
                <select name="country" class="form-control" [(ngModel)]="location.country"
                        class="form-control input-lg">
                    <option *ngFor="let country of countries" [value]="country.code">{{ country.name}}</option>
                </select>
            </div>
        </div>
        <!-- summary -->
        <div class="form-group row">
            <div class="col-md-6">
                <div class="controls">
                    <input name="summary" [(ngModel)]="location.summary" placeholder="A brief summary why this place is so exciting"
                           class="form-control input-sm"/>
                </div>
            </div>
        </div>

        <!-- coordinates -->
        <div class="form-group row">
            <div class="col-md-2">
                <label class="control-label" for="coordinates_lat">Latitude / Breitengrad --- </label>
                <input name="" [(ngModel)]="location.coordinates[1]" type="text" placeholder="d.dddddd"
                       class="form-control input-lg" name="lat"/>
            </div>

            <div class="col-md-2">
                <label class="control-label" for="coordinates_lon">Longitude / Längengrad ||| </label>
                <input name="" [(ngModel)]="location.coordinates[0]" type="text" placeholder="d.dddddd"
                       class="form-control input-lg" name="lon"/>
            </div>

            <!--
            <div class="col-md-1">
                <label class="control-label" for="laton">Enter lat,lon</label>
                <button type="button" class="btn btn-info btn-lg" name="latlon">
                    <span class="glyphicon glyphicon-map">Lat,Lon</span>
                </button>
            </div>
            -->
            <div class="col-md-1">
                <label class="control-label" for="searchlatlon">Search</label>
                <button type="button" class="btn btn-info btn-lg" name="searchlatlon"
                        onclick="window.open('https://latitude.to/', '_latlong');">
                    <span class="glyphicon glyphicon-map"></span>
                    latitude.to
                </button>
            </div>
        </div>

        <!-- URL to place -->
        <div class="form-group row">
            <div class="col-md-4">
                <label class="control-label" for="url">Primary Link for this place</label>
                <div class="controls">
                    <input name="url" [(ngModel)]="location.primaryUrl" placeholder="Enter some interesting URL"
                           type="url"
                           class="form-control input-sm"/>
                </div>
            </div>
            <div class="col-md-2">
                <label class="control-label" for="lotype">Location Type</label>
                <select [(ngModel)]="location.lotype" class="form-control input-sm" name="lotype">
                    <option *ngFor="let key of lotypeKeys" [value]="key">{{lotypes[key]}}</option>
                </select>
            </div>
        </div>

        <!-- URL to picture -->
        <div class="form-group row">
            <div class="col-md-6">
                <label class="control-label" for="url">Link to Picture of location</label>
                <div class="controls">
                    <input name="imageUrl" [(ngModel)]="location.imageUrl" placeholder="Enter url to location photo"
                           type="url" class="form-control input-sm"/>
                </div>
            </div>
        </div>

        <!-- Notes-->
        <div class="form-group row">
            <div class="col-md-6">
                <label class="control-label" for="url">Notes for this location</label>

                <div class="controls">
                <textarea [(ngModel)]="location.notes" name="notes" placeholder="Recipe Notes"
                          rows="5" class="form-control input-sm"></textarea>
                </div>
            </div>
        </div>

        <!-- file upload -->


        <!-- Action buttons -->
        <div class="form-group row">
            <!--https://angular.io/guide/forms-->
            <button type="submit" class="btn btn-success btn-lg">
                <span class="glyphicon glyphicon-save"></span>
                Submit Place
            </button>&nbsp;

            <button type="button" (click)="onDelete()" class="btn btn-warning btn-lg">
                <span class="glyphicon glyphicon-remove"></span>
                Delete Place
            </button>&nbsp;

            <label class="btn btn-default">
                <input type="file" ngFileSelect [options]="options" (uploadOutput)="onUploadOutput($event)"
                       [uploadInput]="uploadInput" multiple>
            </label>

        </div>
    </form>

    <!-- Deee Bug -->
    <div>
        <br/>
        <input type="checkbox" [(ngModel)]="debug"> Debug
        <pre *ngIf="debug">{{location|json}}}</pre>
        <pre *ngIf="debug">{{files|json}}}</pre>
    </div>

</div>
